<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🧠 Smart Health Checker</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #2b5876, #4e4376), url('https://www.transparenttextures.com/patterns/dark-mosaic.png');
      background-blend-mode: overlay;
      background-size: cover;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(14px);
      border-radius: 16px;
      padding: 40px 30px;
      width: 420px;
      color: #fff;
      box-shadow: 0 0 25px rgba(0,0,0,0.2);
      animation: fadeIn 0.5s ease;
      text-align: center;
    }

    input, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      font-family: inherit;
    }

    input {
      background: #fff;
      color: #333;
    }

    button {
      background-color: #ffffff;
      color: #2b5876;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #f3e8ff;
    }

    .back-btn {
      background: transparent;
      border: 1px solid #fff;
      color: white;
      margin-top: 12px;
    }

    .hidden {
      display: none;
    }

    h2, h3 {
      margin-bottom: 15px;
    }

    .emoji {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .gender-btn {
      background-color: rgba(255, 255, 255, 0.3);
      color: white;
      border: 1px solid #fff;
      border-radius: 8px;
      padding: 10px 16px;
      margin: 5px;
      cursor: pointer;
      transition: 0.3s;
      width: 30%;
      display: inline-block;
    }

    .gender-btn.selected {
      background-color: #ffffff;
      color: #2b5876;
      font-weight: bold;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>

<!-- Step 1: Enter Name and Gender -->
<div class="card" id="step1">
  <div class="emoji">👋😄</div>
  <h2>Welcome!</h2>

  <input type="text" id="username" placeholder="🧑 Enter your name" oninput="checkInputs()" />

  <div style="margin: 15px 0;">
    <p>Select your gender:</p>
    <div id="gender-buttons">
      <button type="button" class="gender-btn" onclick="selectGender('Male')">👨 Male</button>
      <button type="button" class="gender-btn" onclick="selectGender('Female')">👩 Female</button>
      <button type="button" class="gender-btn" onclick="selectGender('Other')">🌈 Other</button>
    </div>
  </div>

  <button id="next-btn" onclick="goToChoice()" disabled>➡ Next</button>
</div>

<!-- Step 2: Choose Option -->
<div class="card hidden" id="step2">
  <div class="emoji">🙋‍♂👀</div>
  <h2 id="greeting">Hi!</h2>
  <p>🔍 What would you like to check?</p>
  <button onclick="showAge()">🎂 Check Age</button>
  <button onclick="showBMI()">⚖ Check BMI</button>
  <button class="back-btn" onclick="backToName()">🔙 Back</button>
</div>

<!-- Step 3A: Age Calculator -->
<div class="card hidden" id="ageScreen">
  <div class="emoji">📆🎉</div>
  <h2>Age Calculator</h2>
  <input type="date" id="birthdate">
  <button onclick="calculateAge()">🧮 Calculate Age</button>
  <h3 id="ageResult"></h3>
  <button class="back-btn" onclick="backToChoice()">🔙 Back</button>
</div>

<!-- Step 3B: BMI Calculator -->
<div class="card hidden" id="bmiScreen">
  <div class="emoji">🏋‍♂📏</div>
  <h2>BMI Calculator</h2>
  <input type="number" id="height" placeholder="📏 Height (cm)">
  <input type="number" id="weight" placeholder="⚖ Weight (kg)">
  <button onclick="calculateBMI()">🧮 Calculate BMI</button>
  <h3 id="bmiResult"></h3>
  <h3 id="bmiStatus"></h3>
  <button class="back-btn" onclick="backToChoice()">🔙 Back</button>
</div>

<script>
  let userName = "";
  let userGender = "";

  // Function to select gender
  function selectGender(gender) {
    userGender = gender;
    const buttons = document.querySelectorAll('.gender-btn');
    buttons.forEach(btn => {
      btn.classList.remove('selected');
      if (btn.textContent.includes(gender)) {
        btn.classList.add('selected');
      }
    });
    checkInputs();
  }

  // Function to enable or disable next button based on input validation
  function checkInputs() {
    const input = document.getElementById("username").value.trim();
    document.getElementById("next-btn").disabled = !(input && userGender);
  }

  // Function to proceed to the choice screen
  function goToChoice() {
    const input = document.getElementById("username").value.trim();

    // Input validation
    if (!input || !userGender) {
      alert("🚫 Please enter your name and select your gender.");
      return;
    }

    userName = input;
    document.getElementById("step1").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");
    document.getElementById("greeting").textContent = `Hi, ${userName}! 👋`;
  }

  // Function to show age calculation screen
  function showAge() {
    document.getElementById("step2").classList.add("hidden");
    document.getElementById("ageScreen").classList.remove("hidden");
  }

  // Function to show BMI calculation screen
  function showBMI() {
    document.getElementById("step2").classList.add("hidden");
    document.getElementById("bmiScreen").classList.remove("hidden");
  }

  // Function to go back to the name screen
  function backToName() {
    document.getElementById("step2").classList.add("hidden");
    document.getElementById("step1").classList.remove("hidden");
    document.getElementById("username").value = "";
    userGender = "";
    checkInputs();
    document.querySelectorAll('.gender-btn').forEach(btn => btn.classList.remove('selected'));
  }

  // Function to go back to the choice screen
  function backToChoice() {
    document.getElementById("ageScreen").classList.add("hidden");
    document.getElementById("bmiScreen").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");

    // Clear previous results
    document.getElementById("birthdate").value = "";
    document.getElementById("height").value = "";
    document.getElementById("weight").value = "";
    document.getElementById("ageResult").textContent = "";
    document.getElementById("bmiResult").textContent = "";
    document.getElementById("bmiStatus").textContent = "";
  }

  // Function to calculate age
  function calculateAge() {
    const birthdate = new Date(document.getElementById("birthdate").value);
    if (!birthdate || isNaN(birthdate)) {
      alert("🚫 Please enter a valid birthdate.");
      return;
    }

    const today = new Date();
    let years = today.getFullYear() - birthdate.getFullYear();
    let months = today.getMonth() - birthdate.getMonth();
    let days = today.getDate() - birthdate.getDate();

    if (days < 0) {
      months--;
      days += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
    }

    if (months < 0) {
      years--;
      months += 12;
    }

    document.getElementById("ageResult").textContent =
      `🗓 ${userName}, you are ${years} year(s), ${months} month(s), and ${days} day(s) old. 🎊`;
  }

  // Function to calculate BMI
  function calculateBMI() {
    const h = parseFloat(document.getElementById("height").value);
    const w = parseFloat(document.getElementById("weight").value);
    if (!h || !w || h <= 0 || w <= 0) {
      alert("🚫 Enter valid height and weight.");
      return;
    }

    const bmi = (w / ((h / 100) ** 2)).toFixed(1);
    let status = "";
    if (bmi < 18.5) status = "⚠ Underweight – Take care!";
    else if (bmi < 24.9) status = "✅ Normal – Great job!";
    else if (bmi < 29.9) status = "⚠ Overweight – Stay active!";
    else status = "❌ Obese – Health advice needed!";

    document.getElementById("bmiResult").textContent = `📊 ${userName}, your BMI is ${bmi}`;
    document.getElementById("bmiStatus").textContent = status;
  }
</script>

</body>
</html>
